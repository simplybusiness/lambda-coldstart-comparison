service: aws-coldstart-ruby25

provider:
  name: aws
  runtime: ruby2.5
  versionFunctions: false
  region: eu-west-1
  tracing: true
  iamRoleStatements:
    - Effect: "Allow" # xray permissions (required)
      Action:
        - "xray:PutTraceSegments"
        - "xray:PutTelemetryRecords"
      Resource:
        - "*"

custom:
  apiGatewayCloudWatchSettings:
    metricsEnabled: true

functions:
  memory-128:
    handler: handler.hello
    memorySize: 128
    events:
      - http: GET /memory-128

  memory-256:
    handler: handler.hello
    memorySize: 256

  memory-512:
    handler: handler.hello
    memorySize: 512
    events:
      - http: GET /memory-512

  memory-1024:
    handler: handler.hello
    memorySize: 1024

  memory-1536:
    handler: handler.hello
    memorySize: 1536
    events:
      - http: GET /memory-1536

plugins:
  - serverless-plugin-tracing
  - serverless-api-gateway-cloudwatch-settings
